<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v3新しいウィンドウでスクリーンセーバー抑制</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            flex-direction: column;
        }
        h1 {
            font-size: 2rem;
            color: #333;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>スクリーンセーバー抑制ウィンドウを開く</h1>
    <button id="openWindowButton">新しいウィンドウを開く</button>

    <script>
        function openNewWindow() {
            const newWindow = window.open('', 'newWindow', 'width=200,height=200');

            const newWindowContent = `
                <!DOCTYPE html>
                <html lang="ja">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>スクリーンセーバー抑制ウィンドウ</title>
                    <style>
                        body {
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            height: 100vh;
                            font-family: Arial, sans-serif;
                            background-color: #f0f0f0;
                        }
                        h1 {
                            font-size: 1rem;
                            color: #333;
                        }
                    </style>
                </head>
                <body>
                    <h1>スクリーンセーバーを抑制中...</h1>
                    <script>
                        (function() {
                            let hiddenElement = document.createElement("div");
                            hiddenElement.style.width = "1px";
                            hiddenElement.style.height = "1px";
                            hiddenElement.style.position = "absolute";
                            hiddenElement.style.top = "-1000px";
                            document.body.appendChild(hiddenElement);

                            function toggleVisibility() {
                                hiddenElement.style.visibility = 
                                    hiddenElement.style.visibility === "hidden" ? "visible" : "hidden";
                                requestAnimationFrame(toggleVisibility);
                            }

                            toggleVisibility();
                        })();
                    </script>
                </body>
                </html>
            `;

            newWindow.document.open();
            newWindow.document.write(newWindowContent);
            newWindow.document.close();
        }

        document.getElementById('openWindowButton').addEventListener('click', openNewWindow);
    </script>
</body>
</html>
